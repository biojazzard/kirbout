(function(){var e;e={slides:0,index:{horizontal:0,vertical:0},init:function(e){e==null&&(e={}),this.Element.init(e),this.Events.init(),this.Url.read()}},window.KINOUT=e}).call(this),function(){KINOUT.Constants={MARKUP:{GLOW:"<div class='glow'></div>",COPYRIGHT:"<div class='copyright'><a href='http://biojazzard.github.com/kirbout'>birb<em>out</em></a>Glued by biojazzard</div>",CREDITS:"<div class='credits'><p>Based on <a href='https://github.com/soyjavi/Kinout'>kinoutJS</a> by <a href='https://github.com/soyjavi'>Javier Jim√©nez Villar</a> and <a href='https://github.com/bastianallgeier/kirbycms'>kirby</a> by <a href='https://github.com/bastianallgeier'>Bastian Allgeier</a></p></div>",PROGRESS:{horizontal:"<div class='progress horizontal' value='0' max='100'><span></span></div>",vertical:"<div class='progress vertical' value='0' max='100'><span></span></div>"},KEYBOARD:"<div class='keyboard'><div class='btn-group'><button class='btn spacer'>&nbsp;</button><button class='btn up'>Up &uarr;</button><button class='btn spacer'>&nbsp;</button></div><div class='btn-group'><button class='btn left'>&larr; Left</button><button class='btn down'>Down &darr;</button><button class='btn right'>Right &rarr;</button></div></div>"},SELECTOR:{KINOUT:".kirbout",SLIDE:".kirbout>section",SUBSLIDE:".kirbout>section.present>article",STEP:"section.present > article.present [data-step]",STEP_TO_SHOW:":not([data-run='success'])",STEP_TO_HIDE:"[data-run='success']",PROGRESS:{horizontal:".progress.horizontal",vertical:".progress.vertical"},KEYBOARD:{left:".btn.left",right:".btn.right",up:".btn.up",down:".btn.down"}},STYLE:{PAST:"past",PRESENT:"present",FUTURE:"future"}}}.call(this),function(){KINOUT.Element=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v;return r=e.Constants.SELECTOR,n=e.Constants.MARKUP,l={parent:void 0,slides:[],steps:[],progress:{horizontal:void 0,vertical:void 0}},i=function(e){return l.parent=$$(r.KINOUT),e.template&&l.parent.addClass(e.template),l.parent.prepend(n.GLOW).append(n.KEYBOARD)},o=function(){return l.slides.length>0||(l.slides=l.parent.children("section")),l.slides},a=function(e){return $$(l.slides[e]).children("article")},u=function(e){return e?h():p()},c=function(){return $$(r.KEYBOARD.left)},d=function(){return $$(r.KEYBOARD.right)},v=function(){return $$(r.KEYBOARD.up)},f=function(){return $$(r.KEYBOARD.down)},s=function(e,t){var i;e==null&&(e="horizontal"),t==null&&(t=0),l.progress[e]||(l.parent.append(n.PROGRESS[e]),l.progress[e]=l.parent.children(r.PROGRESS[e]).children("span")),i=e==="horizontal"?"width":"height",l.progress[e].style(i,""+t+"%")},h=function(){var e,t,n,i,s,o;e=!1,o=$$(r.STEP+r.STEP_TO_SHOW);for(i=0,s=o.length;i<s;i++){t=o[i],n=$$(t);if(n.data("run")!=="success"){n.data("run","success"),e=!0;break}}return e},p=function(){var e,t,n,i;e=!1,i=$$(r.STEP+r.STEP_TO_HIDE),t=i.length;while(t>0){n=$$(i[t-1]);if(n.data("run")==="success"){n.data("run",""),e=!0;break}t--}return e},{init:i,slides:o,subslides:a,steps:u,progress:s}}(KINOUT)}.call(this),function(){KINOUT.Events=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p;return i={KEYDOWN:"keydown",CLICK:"click",TOUCH:"touchstart",HASHCHANGE:"hashchange",MOUSEWHEEL:"mousewheel"},r={LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down"},s=function(){p()},p=function(){t.isMobile()?t(document).on(i.TOUCH,c,!1):(t(document).on(i.KEYDOWN,l,!1),t(document).on(i.CLICK,a,!1),t(document).on(i.MOUSEWHEEL,h,!1))},l=function(e){e.keyCode>=37&&e.keyCode<=40&&(o(e),e.preventDefault())},c=function(e){var t;e.touches.length===1&&(e.preventDefault(),t={x:e.touches[0].clientX,y:e.touches[0].clientY},u(t))},a=function(e){var n;if(t(e.target).closest("a").length)return;e.preventDefault(),n={x:e.clientX,y:e.clientY},u(n)},h=function(e){},f=function(){return e.Url.read()},o=function(t){switch(t.keyCode){case 37:e.Router.direction(r.LEFT);break;case 39:e.Router.direction(r.RIGHT);break;case 38:e.Router.direction(r.UP);break;case 40:e.Router.direction(r.DOWN)}},u=function(t){var n,i;i=window.innerWidth*.3,n=window.innerHeight*.3,t.x<i?e.Router.direction(r.LEFT):t.x>window.innerWidth-i?e.Router.direction(r.RIGHT):t.y<n?e.Router.direction(r.UP):t.y>window.innerHeight-n&&e.Router.direction(r.DOWN)},{init:s}}(KINOUT,Quo)}.call(this),function(){KINOUT.Router=function(e,t){var n,r,i,s,o,u;return i={},n=function(t){i=e.View.index();switch(t){case"left":return s();case"right":return o();case"up":return u();case"down":return r()}},s=function(){i.horizontal--,e.View.slide(i.horizontal,0,!1)},o=function(){i.horizontal++,e.View.slide(i.horizontal,0)},u=function(){i.vertical--,e.View.slide(i.horizontal,i.vertical,!1)},r=function(){i.vertical++,e.View.slide(i.horizontal,i.vertical)},{direction:n}}(KINOUT)}.call(this),function(){KINOUT.Step=function(e,t){var n,r;return r=function(){return this},n=function(e,t){},{show:r,hide:n}}(KINOUT)}.call(this),function(){KINOUT.Url=function(e,t){var n,r;return n=function(){var t,n,r;t=window.location.hash.slice(2).split("/"),n=t[0]?parseInt(t[0]):0,r=t[1]?parseInt(t[1]):0,e.View.slide(n,r)},r=function(e,t){var n;n="/";if(e>0||t>0)n+=e;t>0&&(n+="/"+t),window.location.hash=n},{read:n,write:r}}(KINOUT)}.call(this),function(){KINOUT.View=function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d;return r=e.Constants.SELECTOR,i=e.Constants.STYLE,a=e.index,c=[],u=function(t,n,r){r==null&&(r=!0),e.Element.steps(r)||(l(t,n),p(),f(t,n),e.Url.write(a.horizontal,a.vertical))},f=function(n,i){var s,o;s=e.Element.slides().length,o=e.Element.subslides(n).length,n>0&&n<s-1?(t(r.KEYBOARD.left).removeClass("enabled").addClass("enabled"),t(r.KEYBOARD.right).removeClass("enabled").addClass("enabled")):n<=0?(t(r.KEYBOARD.left).removeClass("enabled"),t(r.KEYBOARD.right).removeClass("enabled").addClass("enabled")):n>=s-1&&(t(r.KEYBOARD.left).removeClass("enabled").addClass("enabled"),t(r.KEYBOARD.right).removeClass("enabled")),!isNaN(o)&&o>1?i>0&&i<o-1?(t(r.KEYBOARD.up).removeClass("enabled").addClass("enabled"),t(r.KEYBOARD.down).removeClass("enabled").addClass("enabled")):i<=0?(t(r.KEYBOARD.up).removeClass("enabled"),t(r.KEYBOARD.down).removeClass("enabled").addClass("enabled")):i>=o-1&&(t(r.KEYBOARD.up).removeClass("enabled").addClass("enabled"),t(r.KEYBOARD.down).removeClass("enabled")):(t(r.KEYBOARD.up).removeClass("enabled"),t(r.KEYBOARD.down).removeClass("enabled")),console.log("horizontal:"+n+"|"+(s-1)+" || vertical:"+i+"|"+(o-1))},s=function(){return{horizontal:a.horizontal,vertical:a.vertical}},l=function(e,t){a.horizontal=e===undefined?a.horizontal:e,a.vertical=t===undefined?a.vertical:t},p=function(){a.horizontal=d(r.SLIDE,a.horizontal),a.vertical=d(r.SUBSLIDE,a.vertical),h()},h=function(){var t,n,r,i;return n=e.Element.slides(),t=parseInt(a.horizontal*100/(n.length-1)),window.requestAnimationFrame(function(){return e.Element.progress("horizontal",t)}),i=0,r=e.Element.subslides(a.horizontal),r.length>1&&(i=parseInt((a.vertical+1)*100/r.length)),window.requestAnimationFrame(function(){return e.Element.progress("vertical",i)})},d=function(e,t){var n;return n=Array.prototype.slice.call(document.querySelectorAll(e)),n.length?(t=Math.max(Math.min(t,n.length-1),0),o(n,t)):t=0,t},o=function(e,t){return e[t].setAttribute("class",i.PRESENT),e.slice(0,t).map(function(e){return e.setAttribute("class",i.PAST)}),e.slice(t+1).map(function(e){return e.setAttribute("class",i.FUTURE)})},{slide:u,index:s,render:o}}(KINOUT,Quo)}.call(this);